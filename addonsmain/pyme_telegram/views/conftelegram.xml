<odoo>
  <data>



    <record model="ir.ui.view" id="view_conf_telegrambot_tree">
        <field name="name">Telegram</field>
        <field name="model">pyme.telegram</field>
        <field name="arch" type="xml">
            <tree default_order='create_date desc'>
					<field name="id"/> 
					<field name="name"/> 
					<field name="token_telegram"/>
					<field name="inteligencia"/>

            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_conf_telegrambot_form">
        <field name="name">Telegram</field>
        <field name="model">pyme.telegram</field>
        <field name="arch" type="xml">
            <form>
			<sheet>
			<group><group>
					
					<field name="name" required="1"/>
					<field name="token_telegram" required="1"/> 
					<field name="usuariosnotificados" widget="many2many_tags" options="{'no_create': True}"/>

			</group>
			
			<group>
			<field name="id"/> 
			<field name="activo"/> 
			<field name="idproceso" readonly="1"/>
			</group>
			</group>
			<group>
			<field name="inteligencia" readonly="1"  domain="[('tipochatbot','=','telegram')]" options="{'no_create': True}" class="oe_inline"/> 
            <field name="tipochatbot" invisible="1"/>
			</group>
					
            <!-- 
			<group>
			<field name="mensajestart" required="1"/> 
			<field name="mensajehelp" required="1"/> 
			
			</group>
					<div>
					<b>Debes Tener en cuenta que la seguridad de Telegram impide que puedas enviar a un Usuario un mensaje sin este haberse unido previamente al bot</b>
					</div>
	
			<notebook>
			<page string="Botones Asignados">
			  <field name="telegramm2o">
			  <tree editable="top">
			    <field name="tipoi"/>
			    <field name="name"/>
			    <field name="tipo"/>
			    <field name="datos"/>
			  </tree>
			  </field>
			  </page>
			</notebook>
            -->
			</sheet>
            </form>
        </field>
    </record>


    <record model="ir.ui.view" id="view_conf_inteligencia_tree">
        <field name="name">Inteligencias</field>
        <field name="model">pyme.telegrambot</field>
        <field name="arch" type="xml">
            <tree default_order='create_date desc'>
					<field name="id"/> 
					<field name="name"/>
				    <field name="modo"/>					
					<field name="usuarioasignado" invisible="1"/>
					<field name="tipochatbot" />
            </tree>
        </field>
    </record>
  
    <record model="ir.ui.view" id="view_conf_inteligencia_form">
        <field name="name">Bots</field>
        <field name="model">pyme.telegrambot</field>
        <field name="arch" type="xml">
            <form default_order='create_date desc'>
            <sheet>
					<group><group>
					<field name="name"/> 
					<field name="tipochatbot" />
					<field name="tiponlu"/>
                    <field name="rasaserver"  options="{'no_create': True}" attrs="{'invisible': [('tiponlu', '!=', 'rasa')]}"/>
                    <field name="modo" widget="radio"/>	
                    </group><group>
					<field name="usuarioasignado" readonly="1"/>
					<button name="generausuario" string="Crea Usuario BOT" type="object" attrs="{'invisible': [('usuarioasignado', '!=', False)]}"/> 
					</group><group>
					<field name="rasaserver" invisible="1"/>
					</group></group>
                    <notebook>
					<page string="Canales de Entrada">
 					<field name="channels" readonly="1" attrs="{'invisible': [('tipochatbot', '=', 'telegram')]}"> 			
					<tree>
					  <field name="name"/>
					  <button name="quitar" string="Desvincular" type="object"/>
					</tree>
					</field>
                    <group>
					<label for="eligeimlivechat" attrs="{'invisible': [('tipochatbot', '=', 'telegram')]}"/>	
                    <div>					
					<field name="eligeimlivechat"  options="{'no_create': True}" attrs="{'invisible': [('tipochatbot', '=', 'telegram')]}" class="oe_inline"/>
					<button name="anyadeboto" string="+ Añade" type="object" attrs="{'invisible': [('tipochatbot', '=', 'telegram')]}" class="oe_inline oe_readonly"/>
					</div>
					</group>
					<field name="telegrambots"  readonly="1"  attrs="{'invisible': [('tipochatbot', '=', 'odoobot')]}"> 			
					<tree>
					  <field name="name"/>
					  <field name="token_telegram"/>
					  <button name="quitar" string="Desvincular" type="object"/>
					</tree>
					</field>
                    <group>		
					  <group>
                      <label for="eligetelegram" attrs="{'invisible': [('tipochatbot', '=', 'odoobot')]}"/>				
					  <div>
					  <field name="eligetelegram"  options="{'no_create': True}" attrs="{'invisible': [('tipochatbot', '=', 'odoobot')]}" class="oe_inline"/>
					  <button name="anyadebott" string="+ Añade" type="object" attrs="{'invisible': [('tipochatbot', '=', 'odoobot')]}" class="oe_inline oe_readonly"/>
					  </div>
                     </group>
					</group>
					</page>
					<page string="Lógica Python"  attrs="{'invisible': [('modo', '!=', 'python')]}">
					<group>
					<field name="logicapython" options="{'no_create': True}"/> 
					</group>
					</page>
					<page string="Respuestas"  attrs="{'invisible': [('modo', '!=', 'lin')]}">
					<field name="linnlu"> 
					<tree >
					<field name="id" invisible="1"/> 
					  <field name="nlu"  options="{'no_create': True}" />
					  <field name="entorno"/>
					  <field name="name"/>
					  <field name="entradas" widget="many2many_tags"/>
					  <field name="contestacion"/>
			        </tree>
					</field>
					</page>
					<page string="Respuestas Error">
					<group><group>
					<field name="salidanoentiendo" required="1"/> 
					<field name="salidavacia" required="1"/> 
					</group></group>
					</page>
					</notebook>
					</sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
			</form>
        </field>
    </record>
  
     <record model="ir.ui.view" id="view_telegram_conversa_view_tree">
        <field name="name">Conversaciones Telegram</field>
        <field name="model">mail.channel</field>
        <field name="arch" type="xml">
         <tree default_order='create_date desc' create="false">

          <field name="id"/>
		  <field name="create_date"/>
		  <field name="channel_type"/>
		  <field name="name" string="ID"/>
          <field name="chatuser" string="Contacto"/>
          <field name="name" string="Asistentes" invisible="1"/>
		  <field name="livechat_channel_id" invisible="1"/>
          
        </tree>
        </field>
    </record>
  
  
  
  
  
      <record model="ir.actions.act_window" id="action_telegrambot">
        <field name="name">Bots Telegram</field>
        <field name="res_model">pyme.telegram</field>
        <field name="view_mode">tree,form</field>
		<field name="domain"></field>
    </record>


      <record model="ir.actions.act_window" id="action_ia">
        <field name="name">Bots</field>
        <field name="res_model">pyme.telegrambot</field>
        <field name="view_mode">tree,form</field>
		<field name="domain"></field>
    </record>




      <record model="ir.actions.act_window" id="action_conversaciones_telegram">
        <field name="name">Conversaciones Telegram</field>
        <field name="res_model">mail.channel</field>
        <field name="view_mode">tree,form</field>
		<field name="context">{}</field>
		<field name="domain">[('channel_type','=','telegram')]</field>
		<!-- <field name="search_view_id" ref="view_productividad_project_task_search"/> -->
		<field name="view_ids" eval="[(5, 0, 0),
                            (0, 0, {'view_mode': 'tree', 'view_id': ref('view_telegram_conversa_view_tree')}),
							(0, 0, {'view_mode': 'form', 'view_id': ref('pyme_rasa.rasa_odooconversa2_view_form')}),]"/>
		
    </record>


        <!--
        <menuitem id="ia_menu" 
					name="Bots" 
				    parent="pyme_organizacionmenu.menu_ajustes"
					sequence="10" 
					web_icon="base,static/description/modules.png"/>
         -->
        <menuitem id="ia_menu" 
					name="Bots" 
					sequence="10" 
					web_icon="base,static/description/modules.png"/>



		 <menuitem id="ia_menu_bots" 
					name="Bots" 
                    action="action_ia"
				    parent="ia_menu"
					sequence="1" 
					web_icon="base,static/description/modules.png"/>


         <!-- 
         <menuitem id="telegramconf_menu" 
					name="Telegram" 
				    parent="pyme_organizacionmenu.menu_ajustes"
					sequence="11" 
					web_icon="base,static/description/modules.png"/>
          -->
  
         <menuitem id="telegramconf_menu" 
					name="Telegram" 
					sequence="11" 
					web_icon="base,static/description/modules.png"/>

		 <menuitem id="telegramconf_menu_bots" 
					name="Bots Telegram" 
                    action="action_telegrambot"
				    parent="telegramconf_menu"
					sequence="1" 
					web_icon="base,static/description/modules.png"/>


		 <menuitem id="telegramconf_menu_conversaciones" 
					name="Conversaciones Telegram" 
                    action="action_conversaciones_telegram"
				    parent="telegramconf_menu"
					sequence="1" 
					web_icon="base,static/description/modules.png"/>

  
  
  </data>
</odoo>