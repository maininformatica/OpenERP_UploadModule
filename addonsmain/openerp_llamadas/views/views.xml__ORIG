<odoo>
  <data>
    <!-- DialogFlow Acciones -->
        <!-- Vista arbol -->
            <record id="view_dialogflowacc_tree" model="ir.ui.view">
                <field name="name">dialogflowacc.tree</field>
                <field name="model">dialogflowacc</field>
                <field name="priority" eval="8" />
                <field name="arch" type="xml">
                    <tree string="Dialog Flow">
                        <field name="name" />
                        <field name="accioncodigo"/>
                        <field name="resultadopos" />
                        <field name="resultadoneg" />
                    </tree>
                </field>
            </record>
    <record id="view_dialogflowlog_tree" model="ir.ui.view">
                <field name="name">dialogflowlog.tree</field>
                <field name="model">dialogflowlogging</field>
                <field name="priority" eval="8" />
                <field name="arch" type="xml">
                    <tree string="Dialog Flow Log" editable="top">
                        <field name="name" readonly="1"/>
                        <field name="date" readonly="1"/>
                        <field name="datos"  readonly="1"/>
                    </tree>
                </field>
            </record>

        <!-- Vista formulario -->
            <record id="view_dialogflowacc_form" model="ir.ui.view">
                <field name="name">dialogflowacc.form</field>
                <field name="model">dialogflowacc</field>
                <field name="priority" eval="8" />
                <field name="arch" type="xml">
                    <form string="dialogflow">
                        <sheet>
                            <group>
                            <group>
                                <field name="name"/>
                                <field name="accioncodigo" required="1"/>
                            </group>
                            <group>
                                <field name="resultadopos"/>
                                <field name="resultadoneg"/>
                            </group>
                            </group>
                            <notebook colspan="4">
                                <page name="variables" string="Variables">
                                    <field name="variables">
                                        <tree editable="top">
                                          <field name="name" required="1"/>
                                          <field name="campo" options="{'no_create': True, 'no_create_edit':True}" required="1"/>
                                          <field name="direccion" required="1"/>
                                        </tree>
                                    </field>
                                </page>
                                <page name="vardial" string="Variables
                                DialogFlow">
                                    <group>
                                        <group>
                                            <field name="entrada"/>
                                        </group>
                                    </group>
                                </page>
								<page name="llamadasrec" string="Llamadas Asociadas">
								<field name="llamada" readonly="1">
								<tree>
								                <field name="date"/>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="partner_phone"/>
                <field name="partner_mobile" invisible="1"/>
								
								</tree>
								</field>
								
								</page>
                            </notebook>
                        </sheet>
                    </form>
                </field>
            </record>


<!-- **************************************** VISTAS **************************************** -->

	
	<!-- VISTA LISTA  -->
 	<record model="ir.ui.view" id="crm_phonecall_main_tree">
        <field name="name">Llamadas Registradas</field>
        <field name="model">crm.phonecall</field>
		<field name="priority">0</field>
        <field name="arch" type="xml">
			<tree string="Phone Calls">
                <field name="date"/>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="partner_phone"/>
                <field name="partner_mobile" invisible="1"/>
                <field name="user_id" context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'sales_team.group_sale_salesman']}"/>
                <field name="tag_ids" widget="many2many_tags" invisible="1"/>
                <field name="state" invisible="1"/>
                <field name="create_date" invisible="1"/>
                <field name="opportunity_id" invisible="1"/>
                <field name="source_id"  string="Origen"/>
                <field name="medium_id"  string="Medio Utilizado"/>

            </tree>
	    </field>
    </record>
	
	
	
	
		<!-- VISTA FORMULARIO  -->
 	<record model="ir.ui.view" id="crm_phonecall_main_form">
        <field name="name">Llamadas Registradas</field>
        <field name="model">crm.phonecall</field>
		<field name="priority">0</field>
        <field name="arch" type="xml">

<form string="Llamadas Registradas">
            <header>
       

				
            </header>
            <sheet>
			
			
			 <div class="oe_button_box" name="button_box">
                <button string="Programa Otra Llamada" icon="fa-phone" name="155" type="action" confirm="¿Desea Generar una rellamada?"/>
                <button string="Crea Evento en Calendario" icon="fa-calendar" name="action_make_meeting" type="object" confirm="Esta accion Generará un Evento de Calendario. ¿Estas Seguro?"/>
                <button string="Convierte a Opotyunidad" name="action_button_convert2opportunity" states="open,pending" icon="fa-hand-pointer-o" type="object" attrs="{'invisible':[('opportunity_id','!=',False)]}" confirm="¿Quieres Convertir a Oportunidad esta llamadas?"/>  
				
				<button string="Asigna Variables" name="action_asignavariables" type="object" icon="fa-sun-o"/>
                    </div>       
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Asunto de la LLamada..."/>
                        </h1>
                        <div class="o_row">
                            
                        </div>
                    </div>
              <group><group>
				<field name="date"/>
				<field name="tag_ids" widget="many2many_tags" />

                </group>
                <group>
                

               				<field name="partner_id"/>
                <field name="partner_phone"/>
                <field name="partner_mobile"/>
                

                

                </group></group>
                
                <notebook>
                  <page string="Descripcion">
                   <field name="descripcion"/>
				   <field name="notas"/>
                  </page>  
                  <page string="Extra">
                    <group>
                      <group>
                                        <field name="user_id" context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'sales_team.group_sale_salesman']}"/>
                
                
                <field name="create_date" invisible="1"/>
               
                <field name="campaign_id" string="Campaña"/>
                <field name="source_id"  string="Origen"/>
                <field name="medium_id"  string="Medio Utilizado"/>
                        
                      </group>
                      <group>
                        <field name="state" />
                         <field name="opportunity_id"/>
						 <field name="intent" readonly="1"/>
						  <field name="dialogflow"/>
                        
                        
                      </group>
                    </group>
                    
                  </page>
                  
                  
                </notebook>
            </sheet>
        </form>
	
	        </field>
    </record>







<!-- **************************************** VIstas de Busqueda **************************************** -->



 	<record model="ir.ui.view" id="crm_phonecall_main_search">
        <field name="name">Llamadas Registradas</field>
        <field name="model">crm.phonecall</field>
		<field name="priority">0</field>
        <field name="arch" type="xml">
<search string="Llamadas">
                <field name="name" string="Asunto"/>
                <field name="date"/>
                <field name="state"/>
                <field name="partner_id" operator="child_of"/>
				<field name="source_id" string="Origen"/>
                <field name="medium_id" string="Medio Utilizado"/>
				<field name="dialogflow" string="Accion DialogFlow"/>
                <group expand="0" string="Agrupar por..">
                    <filter string="Contacto" domain="[]" context="{'group_by':'partner_id'}"/>
                    <filter string="Responsable" domain="[]" context="{'group_by':'user_id'}"/>
                    <filter string="Més" domain="[]" context="{'group_by':'date'}" help="Calls Date by Month"/>
					<filter string="Origen" domain="[]" context="{'group_by':'source_id'}" help="Agrupar por Origen"/>
					<filter string="Medio Utilizado" domain="[]" context="{'group_by':'medium_id'}" help="Medio Utilizado"/>
					<filter string="DialogFlow" domain="[]" context="{'group_by':'dialogflow'}" help="Accion DialogFlow"/>
                </group>
            </search>
        
                </field>
            </record>




        <!-- Acción -->
            <record model="ir.actions.act_window" id="action_view_dialogflow">
                <field name="name">DialogFlow</field>
                <field name="res_model">dialogflowacc</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="domain">[]</field>
                <field name="help" type="html">
                    <p class="oe_view_nocontent_create">
                        Crear un DialogFlow
                    </p>
                </field>
            </record>

            <record model="ir.actions.act_window" id="action_view_dialogflowlog">
                <field name="name">DialogFlow LOG</field>
                <field name="res_model">dialogflowlogging</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="domain">[]</field>
                <field name="help" type="html">
                    <p class="oe_view_nocontent_create">
                        Crear un Registro de LOG
                    </p>
                </field>
            </record>





<!-- **************************************** ACCIONES **************************************** -->

    <!-- Action Llamadas -->
    <record model="ir.actions.act_window" id="action_crm_phonecall_main">
        <field name="name">Llamadas</field>
        <field name="res_model">crm.phonecall</field>
        <field name="view_mode">tree,form</field>
		<field name="domain"></field>
		<field name="search_view_id" ref="crm_phonecall_main_search"/>
        <field name="context">{}</field>
        <field name="view_ids" eval="[(5, 0, 0),
                            (0, 0, {'view_mode': 'tree', 'view_id': ref('crm_phonecall_main_tree')}),
                            (0, 0, {'view_mode': 'form', 'view_id': ref('crm_phonecall_main_form')})]"/>
    </record>




    <!-- Fin DialogFlow Acciones -->
    
    <!-- Menú principal -->
        <menuitem id="DialogFlow"
                  name="DialogFlow"/>

            <!-- Opciones -->

            <menuitem id="DialogFlow2"
                      name="DialogFlow"
                      action="action_view_dialogflow"
                      parent="DialogFlow"
                      sequence="2"/>


            <menuitem id="DialogFlow3"
                      name="DialogFlow Log"
                      action="action_view_dialogflowlog"
                      parent="DialogFlow"
                      sequence="3"/>
					  
					  


                <menuitem id="LlamadasExtra2"
                      name="Llamadas"
                      action="action_crm_phonecall_main"
                      parent="DialogFlow"
                      sequence="1"/>


    <!-- Fin Menú principal -->
  </data>
</odoo>